/ This partial acts as glue between rails form helpers and the component govuk_radio buttons
/ With access to the form object, we can infer a lot of information from it

ruby:
  #Give items ids based on rails' convention
  local_assigns[:idPrefix] ||= get_attribute_id_prefix(form, key) if local_assigns[:key]
  items_with_negations = local_assigns[:items].map do |item|
    item[:id] ||= get_attribute_id_prefix(form, item[:key] || local_assigns[:name])
    item[:value] ||= 1
    item[:name] ||= get_attribute_name(form, item[:key] || local_assigns[:name])
    neg_item = { name: item[:name], type: "hidden", value: local_assigns[:unchecked_value] || "0"}
    neg_item[:disabled] = item[:disabled] unless item[:disabled].nil?
    [neg_item, item]
    
  end
  local_assigns[:items] = items_with_negations.flatten  
  if form.object
    if form.object.errors
      error_text = form.object.errors.full_messages_for(key).first.presence
      local_assigns[:errorMessage] ||= { text: error_text } if error_text
    end
  end
= render "components/govuk_checkboxes", **local_assigns
