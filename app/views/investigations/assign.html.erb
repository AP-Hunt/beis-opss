<% content_for :page_title, "Update assignee - Market Surveillance & Product Safety" %>

<%= link_to 'Back to case', @investigation, class: "govuk-back-link" %>

<%= render "investigation_heading", investigation: @investigation %>
<h2 class="govuk-heading-l">Update assignee</h2>

<h4 class="heading-medium">Current assignee</h4>
<p><%= @investigation.assignee.nil? ? "Unassigned" : @investigation.assignee.email %></p>

<%= form_with(url: update_assignee_investigation_path(@investigation), local: true) do |form| %>
  <div class="form-group">
    <%= form.label :email, :class => "form-label" %>
    <%= form.select :email,
                    # When there are many users, we should consider loading them with ajax using the autocomplete
                    options_for_select(
                      User.all.collect {|u| [u.email]},
                      @investigation.assignee ? @investigation.assignee.email : ""
                    ),
                    { include_blank: "Unassigned" },
                    { class: "form-control", id: "assignee-picker" }
    %>
  </div>
  
  <div class="form-group">
    <%= form.submit "Update assignee", :class => "govuk-button" %>
  </div>
<% end %>
